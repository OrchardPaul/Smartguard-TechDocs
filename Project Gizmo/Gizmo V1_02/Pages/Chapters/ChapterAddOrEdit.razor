
<EditForm Model="@TaskObject" OnValidSubmit="@HandleValidSubmit">
    <div class="modal-body">
        

        <div class="form-group">
            <label>Case Type Group</label>
            <div class="form-label-check">
                <label>New</label><input type="checkbox" @bind-value="addNewCaseTypeGroupOption" />
            </div>
            @if (!addNewCaseTypeGroupOption)
            {

                @if (AllObjects is null)
                {
                    <div class="spinner"></div>
                }
                else
                {
                    <InputSelect class="form-control" @bind-Value="TaskObject.CaseTypeGroup">
                        @foreach (var c in AllObjects
                                          .Where(C => !(C.SmartflowObject.CaseTypeGroup is null))
                                          .Select(C => C.SmartflowObject.CaseTypeGroup)
                                          .Distinct()
                                          .ToList())
                                {
                            <option value="@c">
                                @c
                            </option>
                                }
                    </InputSelect>
                }
            }
            else
            {
                
                <InputText class="form-control" @bind-Value="TaskObject.CaseTypeGroup"></InputText>
            }


        </div>

        <div class="form-group">
            <label>Case Type</label>
            <div class="form-label-check">
                <label>New</label>
                <input type="checkbox" @bind-value="addNewCaseTypeOption" />
            </div>
            @if (!addNewCaseTypeOption)
            {

                @if (AllObjects is null)
                {
                    <div class="spinner"></div>
                }
                else
                {
                    <InputSelect class="form-control" @bind-Value="TaskObject.CaseType">
                        @if (string.IsNullOrEmpty(TaskObject.CaseTypeGroup))
                        {
                              @foreach (var c in AllObjects
                                         .Where(C => !(C.SmartflowObject.CaseType is null))
                                         .Select(C => C.SmartflowObject.CaseType)
                                         .Distinct()
                                         .ToList())
                                {
                            <option value="@c">
                                @c
                            </option>
                                }
                        }
                        else
                        {
                            @foreach (var c in AllObjects
                                         .Where(C => !(C.SmartflowObject.CaseType is null) && (C.SmartflowObject.CaseTypeGroup == TaskObject.CaseTypeGroup))
                                         .Select(C => C.SmartflowObject.CaseType)
                                         .Distinct()
                                         .ToList())
                                {
                            <option value="@c">
                                @c
                            </option>
                                }
                        }
                    </InputSelect>
                }

            }
            else
            {
                <InputText class="form-control" @bind-Value="TaskObject.CaseType"></InputText>

            }


        </div>

        <div class="form-group">
            <label>Smartflow Name</label>
            <InputText class="form-control" @bind-Value="TaskObject.SmartflowName"></InputText>
        </div>
    </div>
    <div class="button-container">
        <button type="submit" class="btn btn-main">Save</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal" @onclick="Close">Cancel</button>

        @if (TaskObject.Id != 0)
        {
            <button type="button" @onclick="HandleValidDelete" class="btn btn-danger">Delete</button>
        }
    </div>

</EditForm>