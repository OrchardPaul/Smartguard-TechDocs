@page "/chapterlistPaul"

@inject IJSRuntime jsRuntime
@using Plk.Blazor.DragDrop
@using Gizmo.Context.OR_RESI

<h1>Chapters</h1>

<label class="OR_btn-Nav" @onclick="() => SelectHome()">Home</label>
@if (selectedCaseType != "")
{
    <label>/ </label>
    <label class="OR_btn-Nav" @onclick="() => SelectCaseType(selectedCaseType)">@selectedCaseType</label>
}
@if (selectedChapter != "")
{
    <label>/ @selectedChapter</label>
}

<br>
<br>

<br>


<div class="row">
    <div class="col-xl-6 col-lg-9 col-md-12 col-sm-12">
        <div class="list-group rounded">
            <div class="list-group-item list-group-item-action active">
                <div class="row">
                    <div class="col-5"><span class="fa fa-"></span>Home</div><div class="col-6"></div><div class="col-1"><span class="badge badge-pill badge-info pull-right">16</span></div>
                </div>
            </div>


            <div class="list-group-item list-group-item-action hand">
                <div class="row ">
                    <div class="col-5"><span class="fa fa-film"></span>Videos</div><div class="col-6"></div><div class="col-1"><span class="badge badge-pill badge-primary pull-right">8</span></div>
                </div>
            </div>



        </div>
    </div>
</div>


<br>



@if (selectedCaseType == "")
{
    <h4 class="modal-title">Case Types</h4>
    <div class="container-fluid">
        <div class="row">
            @if (CaseTypeList is null)
            {
                <div class="spinner"></div>
            }
            else
            {
                @foreach (var caseType in CaseTypeList)
                {
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
                        @if (caseType == "Purchase")
                        {
                            <a class="shadow card rounded caseType_@caseType" @onclick="() => SelectCaseType(caseType)">PURCH Residential - @caseType</a>
                        }
                        else
                        {
                            <a class="shadow card rounded caseType_@caseType" @onclick="() => SelectCaseType(caseType)">SALE Residential - @caseType</a>
                        }
                    </div>
                }
            }
        </div>
    </div>

}
else if (selectedChapter == "")
{

    <h4 class="modal-title">Chapters</h4>
    <div class="container-fluid h-25">
        <div class="row">
            @foreach (var Chapter in lstChapters)
            {
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
                    <a class="shadow card rounded chapterCard_@Chapter.Name" @onclick="() => SelectDocList(Chapter.Name,Chapter.Id)">@Chapter.Name</a>
                </div>
            }
        </div>
    </div>
}


@if (selectedChapter != "")
{
    <h4 class="modal-title">Chapters Items</h4>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
        @if (displaySection == "Agenda")
        {
            <span class="shadow card rounded chapterItem_Agenda" @onclick='() => ShowAgenda("Hide", "Agenda")'>Agendas (@lstAgendas.Count) </span>
        }
        else
        {
            <span class="shadow card rounded chapterItem_Agenda" @onclick='() => ShowAgenda("Show", "Agenda")'>Agendas (@lstAgendas.Count)</span>
        }
    </div>

    @if (displaySection == "Agenda")
    {
        <div class="fade-in">
            @foreach (var Agenda in lstAgendas)
            {
                <div class="OR_ChapterItemTable">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2 ">
                        <span class="shadow card subCard rounded chapterItem_Agenda">@Agenda.Name</span>
                    </div>
                </div>
            }
        </div>
    }


    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
        @if (displaySection == "Fee")
        {
            <span class="shadow card rounded chapterItem_Fee" @onclick='() => ShowAgenda("Hide", "Fee")'>Fees (@lstFees.Count)</span>
        }
        else
        {
            <span class="shadow card rounded chapterItem_Fee" @onclick='() => ShowAgenda("Show", "Fee")'>Fees (@lstFees.Count)</span>
        }
    </div>

    @if (displaySection == "Fee")
    {
        <div class="fade-in">
            @foreach (var Fee in lstFees)
            {
                <div class="OR_ChapterItemTable">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2 ">
                        <span class="shadow card subCard rounded chapterItem_Fee" @onclick='(() => PrepareForEdit(Fee,"Fee"))' data-toggle="modal" data-target="#taskModal" value="Edit">@Fee.Name</span>
                    </div>
                </div>
            }

            <input type="button" data-toggle="modal" data-target="#taskModal" class="btn btn-primary" value="Add Fee" />
        </div>
    }

    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
        @if (displaySection == "Docs")
        {
            <span class="shadow card rounded chapterItem_Documents" @onclick='() => ShowAgenda("Hide", "Docs")'>Documents / Steps (@lstDocs.Count)</span>
        }
        else
        {
            <span class="shadow card rounded chapterItem_Documents" @onclick='() => ShowAgenda("Show", "Docs")'>Documents / Steps (@lstDocs.Count)</span>
        }
    </div>



    @if (displaySection == "Docs")
    {
        <input type="button" class="btn btn-primary" @onclick='(() => PrepareForInsert("Document / Step"))' data-toggle="modal" data-target="#taskModal" value="Add New" />


        <div class="list-group">
            <div class="list-group-item list-group-item-action active">
                <span class="fa fa-home"></span> Home
            </div>


            <Dropzone Items="lstDocs" TItem="UsrOrDefChapterManagement" Class="draggableList" InstantReplace="true">
                <div class="list-group-item list-group-item-action " @ondrop="OnDragDrop">

                    <div><span class="fa fa-file-alt"></span></div>@context.Name<span class="badge badge-pill badge-primary pull-right" @onclick='(() => PrepareForEdit(context,"Document / Step"))'> @context.SeqNo</span>
                </div>
            </Dropzone>
        </div>



        <input type="button" class="btn btn-primary" @onclick='(() => PrepareForInsert("Document / Step"))' data-toggle="modal" data-target="#taskModal" value="Add Letter" />
    }

    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2">
        @if (displaySection == "Status")
        {
            <span class="shadow card rounded chapterItem_Status" @onclick='() => ShowAgenda("Hide", "Status")'>Status (@lstStatus.Count)</span>
        }
        else
        {
            <span class="shadow card rounded chapterItem_Status" @onclick='() => ShowAgenda("Show", "Status")'>Status (@lstStatus.Count)</span>
        }
    </div>

    @if (displaySection == "Status")
    {
        <div class="fade-in">
            @foreach (var status in statusObjects)
            {
                <div class="OR_ChapterItemTable">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2 ">
                        <span class="shadow card subCard rounded chapterItem_Status" @onmouseout="() => ToggleStatusHover(status)" @onmouseover="() => ToggleStatusHover(status)" @onclick='(() => PrepareForEdit(status.management,"Status"))' data-toggle="modal" data-target="#taskModal" value="Edit">@status.management.Name</span>
                        @if (status.hoveredOver)
                        {
                            <div>Hover</div>
                        }
                    </div>
                </div>
            }

            <input type="button" data-toggle="modal" data-target="#taskModal" class="btn btn-primary" value="Add Letter" />
        </div>
    }


}

<ChapterDetail TaskObject=editObject DataChanged="@DataChanged" selectedCaseType="@selectedCaseType" selectedList="@selectedList" dropDownDocumentList="@dropDownDocumentList">
    <CustomHeader>@customHeader</CustomHeader>
</ChapterDetail>