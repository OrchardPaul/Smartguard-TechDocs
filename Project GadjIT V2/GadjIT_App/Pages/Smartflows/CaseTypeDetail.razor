

@using GadjIT_App.Pages.Smartflows.ComponentsCaseTypeDetail._Backup
@using GadjIT_App.Pages.Smartflows.ComponentsCaseTypeDetail._Header
@using GadjIT_App.Pages.Smartflows.ComponentsCaseTypeDetail._Documents
@using GadjIT_App.Pages.Smartflows.ComponentsSmartflowDetail._Background
@implements IDisposable


    <div class="tran-block page-header-block ">
        <div class="page-header-title">
            <div>
                <div class="float-left back-link" @onclick="SelectHome">
                    <span class="col-alt fa fa-angle-double-left"></span>
                </div>
                <h3>Case Type: @_SelectedCaseType</h3>
            </div>
            <p class="hidden-md-down">
                Group: <span class="badge badge-grey mr-3">@_SelectedCaseTypeGroup</span>
                Case Type: <span class="badge badge-grey mr-3">@_SelectedCaseType</span>

                @* @if(AppSmartflowsState != null)
                {
                    if (AppSmartflowsState.IsSmartflowLocked(UserSession.User.Id, )
                    {
                        <span class="pl-5">Active Users: </span>
                        string userClass = "active-user";
                        foreach (var user in AppSmartflowsState.GetSmartflowItemState(UserSession, SelectedSmartflow).ActiveUsers.Where(U => U.UserName != UserSession.User.FullName).ToList())
                        {
                            <span class="ml-2 @userClass font-120"><li class="fa fa-user" title="@user.UserName - @user.LastActive.ToString()"></li></span>
                            userClass = (userClass == "active-user" ? "active-user-alt" : "active-user");
                        }


                    }
                } *@


            </p>
            
        </div>
        
        <div class="push-right user-guide">
            <a href="@UserGuideURL" target="_blank" title="Link to Smartflow user guide">User Guide<span><i class="fa fa-circle-info"></i></span></a>
        </div>  
        
    </div>

    <div class="tran-block rounded">
        <div class="tran-navbar hidden-lg-down">
            <nav class="navbar navbar-expand ">

                <ul class="navbar-nav">
                    <li class="nav-item @(NavDisplay == "CaseType" ? "active" : "")" @onclick='() => ShowNav("CaseType")'>
                        <span class="font-120"><span class="fa fa-home" Title="Home - main Case Type details"></span></span>

                    </li>
                    
                    <li class="nav-item @(NavDisplay == "Background" ? "active" : "")" @onclick='() => ShowNav("Background")'>
                        <span class="font-120"><span class="fa fa-image" Title="Background - set background colour or image"></span></span>
                        <div class="subtitle">Background</div>
                    </li>

                    <li class="nav-item @(NavDisplay == "Backups" ? "active" : "")" @onclick='() => ShowNav("Backups")'>
                        <span class="font-120"><span class="fa fa-save" Title="Backups - save, download and restore"></span></span>
                        <div class="subtitle">Backups</div>
                    </li>

                    
                    <li class="nav-item @(NavDisplay == "Docs" ? "active" : "")" @onclick='() => ShowNav("Docs")'>
                        <span class="font-120"><span class="fa fa-file" Title="Document maintenance"></span></span>
                        <div class="subtitle">Docs</div>
                    </li>
                    

                </ul>

            </nav>
        </div>


        @if (DisplaySpinner)
        {
            <div class="spinner"></div>
        }
        else
        {

            @if (NavDisplay == "CaseType")
            {

                <CaseTypeHeaderDetail    
                                        _SelectedCaseTypeGroup=@_SelectedCaseTypeGroup
                                        _SelectedCaseType=@_SelectedCaseType
                                        _LstVmClientSmartflowRecord=@_LstVmClientSmartflowRecord
                                        _SelectSmartflow=@_SelectSmartflow
                                        _RefreshSmartflowsTask=@RefreshSmartflowsTask
                                        >
                </CaseTypeHeaderDetail>
                
            }

            @if (NavDisplay == "Background")
            {
                <SmartflowBackgroundDetail    _Selected_ClientSmartflowRecord=@null
                                            _SelectedSmartflow=@null
                                            >
                </SmartflowBackgroundDetail> 
            }

            @if (NavDisplay == "Backups")
            {
                <CaseTypeBackupDetail    _SelectedCaseTypeGroup=@_SelectedCaseTypeGroup
                                            _SelectedCaseType=@_SelectedCaseType
                                            _LstVmClientSmartflowRecord=@_LstVmClientSmartflowRecord
                                            _RefreshSmartflowsTask=@RefreshSmartflowsTask
                                            >
                </CaseTypeBackupDetail>
                
            }

            @if (NavDisplay == "Docs")
            {
                <CaseTypeDocumentDetail    _SelectedCaseTypeGroup=@_SelectedCaseTypeGroup
                                            _SelectedCaseType=@_SelectedCaseType
                                            _LstVmClientSmartflowRecord=@_LstVmClientSmartflowRecord
                                            >
                </CaseTypeDocumentDetail>
                
            }

        }
    </div>


<div id="exp"></div>